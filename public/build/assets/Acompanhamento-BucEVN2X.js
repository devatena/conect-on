import{r as w,w as J,a as o,o as m,c as y,b as t,d as a,e as C,t as x,f as Z,g as c,F as S,O as A,h as $,i as M,j as F,k as V,p as z,l as R,_ as E,m as Y,u as G,Z as K,C as P}from"./app-DZ82tjnP.js";const Q=C("span",{class:"headline"},"Ajustar horas trabalhas",-1),W={__name:"UserAjuste",props:{record:Array},setup(r){const f=r,s=w(!1),h=w(!1),n=w({entrada:"",saida:"",justificativa:""}),j=()=>{s.value=!0,v()},e=()=>{s.value=!1,u()},i=()=>{h.value=!0;const d={time_recording_id:f.record.id,old_change:JSON.stringify({entrada:f.record.input,saida:f.record.output}),new_change:JSON.stringify({entrada:n.value.entrada,saida:n.value.saida}),justification:n.value.justificativa};A.post("/record/send-ajustment",d,{replace:!0,onFinish:l=>{h.value=!1,e()}})},u=()=>{n.value={entrada:"",saida:"",justificativa:""}},v=()=>{n.value={entrada:f.record.input,saida:f.record.output,justificativa:""}},p=w(!1);return J(()=>[n.value.justificativa,n.value.entrada,n.value.saida],([d,l,_])=>{p.value=d.trim().length>0&&l&&_},{immediate:!0}),(d,l)=>{const _=o("v-btn"),b=o("v-card-title"),k=o("v-text-field"),I=o("v-col"),D=o("v-row"),U=o("v-textarea"),L=o("v-form"),N=o("v-card-text"),T=o("v-spacer"),B=o("v-card-actions"),H=o("v-card"),q=o("v-dialog");return m(),y(S,null,[t(_,{"prepend-icon":"mdi-pencil",variant:"outlined",size:"x-small",color:r.record.adjustment==="sent"?"green":"orange",class:"mb-1 mt-1",onClick:l[0]||(l[0]=g=>r.record.adjustment==null?j():"")},{default:a(()=>[C("span",null,x(r.record.adjustment==="sent"?"Ajuste enviado":"Ajustes"),1)]),_:1},8,["color"]),t(q,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=g=>s.value=g),"max-width":"500px"},{default:a(()=>[t(H,null,{default:a(()=>[t(b,null,{default:a(()=>[Q]),_:1}),t(N,null,{default:a(()=>[t(L,{ref:"form",onSubmit:l[4]||(l[4]=Z(()=>{},["prevent"]))},{default:a(()=>[t(D,null,{default:a(()=>[t(I,{cols:"12",md:"6"},{default:a(()=>[t(k,{label:"Entrada",modelValue:n.value.entrada,"onUpdate:modelValue":l[1]||(l[1]=g=>n.value.entrada=g),type:"time",required:""},null,8,["modelValue"])]),_:1}),t(I,{cols:"12",md:"6"},{default:a(()=>[t(k,{label:"Saída",modelValue:n.value.saida,"onUpdate:modelValue":l[2]||(l[2]=g=>n.value.saida=g),type:"time",required:""},null,8,["modelValue"])]),_:1})]),_:1}),t(D,null,{default:a(()=>[t(I,{cols:"12"},{default:a(()=>[t(U,{label:"Justificativa",modelValue:n.value.justificativa,"onUpdate:modelValue":l[3]||(l[3]=g=>n.value.justificativa=g),rows:"3",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512)]),_:1}),t(B,null,{default:a(()=>[t(T),t(_,{color:"blue darken-1",text:"",onClick:e},{default:a(()=>[c("Cancelar")]),_:1}),t(_,{color:"blue darken-1",text:"",onClick:i,loading:h.value,disabled:!p.value},{default:a(()=>[c("Enviar pra aprovação")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},O=r=>(z("data-v-4eb9ae59"),r=r(),R(),r),X=O(()=>C("br",null,null,-1)),tt=O(()=>C("hr",null,null,-1)),at=$({__name:"ListRecord",props:{records:Object},setup(r){const f=r;function s(n){const[j,e,i]=n.split("-"),u=new Date(j,e-1,i);return`${u.getDate().toString().padStart(2,"0")}/${(u.getMonth()+1).toString().padStart(2,"0")}/${u.getFullYear()}`}function h(n,j){const e=new Date("1970-01-01T"+n+"Z"),i=new Date("1970-01-01T"+j+"Z"),v=Math.abs(i-e)/(1e3*60*60),p=Math.floor(v),d=Math.floor((v-p)*60),l=Math.round(((v-p)*60-d)*60),_=(p<10?"0":"")+p,b=(d<10?"0":"")+d,k=(l<10?"0":"")+l;return _+":"+b+":"+k}return(n,j)=>{const e=o("v-col"),i=o("v-icon"),u=o("v-row"),v=o("v-btn");return m(!0),y(S,null,M(f.records.hour,(p,d)=>(m(),y("div",{elevation:"0",key:d,class:"mb-4"},[t(u,{"no-gutters":"",class:"title-data"},{default:a(()=>[t(e,{cols:"9",class:"d-flex justify-start"},{default:a(()=>[c(x(s(d.slice(0,10))),1)]),_:2},1024),t(e,{cols:"2",class:"text--secondary"},{default:a(()=>[c(" Total: "+x(r.records.totalHour[d]),1)]),_:2},1024),t(e,{cols:"1",class:"text--secondary"},{default:a(()=>[r.records.errors[d]?V("",!0):(m(),F(i,{key:0,icon:"mdi-check-all"})),r.records.errors[d]?(m(),F(i,{key:1,icon:"mdi-alert"})):V("",!0)]),_:2},1024)]),_:2},1024),t(u,{"no-gutters":"",class:"p-2",style:{"background-color":"rgb(213, 213, 213)"}},{default:a(()=>[t(e,{cols:"1",class:"text-left"},{default:a(()=>[c(" # ")]),_:1}),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(" Entrada ")]),_:1}),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(" Saida ")]),_:1}),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(" Tempo trabalhado ")]),_:1}),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(" Intervalo ")]),_:1}),t(e,{cols:"3",class:"text-center"},{default:a(()=>[c(" Ações ")]),_:1})]),_:1}),(m(!0),y(S,null,M(r.records.hour[d],(l,_)=>(m(),F(u,{key:d,"no-gutters":"",class:"p-2"},{default:a(()=>[t(e,{cols:"1",class:"text-left"},{default:a(()=>[c(x(_+1),1)]),_:2},1024),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(x(l.input),1)]),_:2},1024),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(x(l.output)+" ",1),l.output?V("",!0):(m(),F(i,{key:0,icon:"mdi-alert"}))]),_:2},1024),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(x(l.hour_complete)+" ",1),l.hour_complete?V("",!0):(m(),F(i,{key:0,icon:"mdi-alert"}))]),_:2},1024),t(e,{cols:"2",class:"text-center"},{default:a(()=>[c(x(_==0?" ":h(r.records.hour[d][_-1].output,l.input))+" ",1),X]),_:2},1024),t(e,{cols:"3",class:"text-center"},{default:a(()=>[l.adjustment!=="approved"?(m(),F(W,{key:0,record:l},null,8,["record"])):V("",!0),l.adjustment==="approved"?(m(),F(v,{key:1,variant:"outlined",size:"x-small",color:"blue",class:"mb-1 mt-1"},{default:a(()=>[c(" Horas ajustadas ")]),_:1})):V("",!0)]),_:2},1024)]),_:2},1024))),128)),tt]))),128)}}}),et=E(at,[["__scopeId","data-v-4eb9ae59"]]),lt=$({__name:"Acompanhamento",props:{records:Object,dateFilter:{type:Object,default:{dataInicial:"",dataFinal:""}}},setup(r){const f=r,s=Y({dataInicial:f.dateFilter.dataInicial,dataFinal:f.dateFilter.dataFinal});function h(){s.dataInicial="",s.dataFinal="",A.visit("/acompanhamento")}function n(){A.visit("/acompanhamento",{method:"get",data:{dataInicial:s.dataInicial,dataFinal:s.dataFinal}})}return(j,e)=>{const i=o("v-text-field"),u=o("v-col"),v=o("v-btn"),p=o("v-row"),d=o("v-card-text"),l=o("v-card"),_=o("painel-user");return m(),y(S,null,[t(G(K),{title:"Acompanhamento"}),t(_,null,{default:a(()=>[t(P,{title:"Acompanhamento"}),t(l,{class:"mx-auto mt-6"},{title:a(()=>[c(" Meus registros ")]),default:a(()=>[t(p,null,{default:a(()=>[t(u,{cols:"3"},{default:a(()=>[t(i,{modelValue:s.dataInicial,"onUpdate:modelValue":e[0]||(e[0]=b=>s.dataInicial=b),label:"Data Inicial",type:"date"},null,8,["modelValue"])]),_:1}),t(u,{cols:"3"},{default:a(()=>[t(i,{modelValue:s.dataFinal,"onUpdate:modelValue":e[1]||(e[1]=b=>s.dataFinal=b),label:"Data Final",type:"date"},null,8,["modelValue"])]),_:1}),t(u,{cols:"2",class:"btn-filter"},{default:a(()=>[t(v,{onClick:e[2]||(e[2]=b=>n()),class:"btn-search",disabled:s.dataInicial===null||s.dataFinal===null},{default:a(()=>[c(" Buscar")]),_:1},8,["disabled"]),t(v,{onClick:e[3]||(e[3]=b=>h()),disabled:s.dataInicial===null||s.dataFinal===null},{default:a(()=>[c(" Limpar Filtro")]),_:1},8,["disabled"])]),_:1})]),_:1}),t(d,null,{default:a(()=>[t(et,{records:r.records},null,8,["records"])]),_:1})]),_:1})]),_:1})],64)}}}),nt=E(lt,[["__scopeId","data-v-183fe41c"]]);export{nt as default};
