import{h as $,m as L,r as A,a as c,o as n,c as I,e as S,b as t,d as e,g as l,j as _,F as M,i as T,O as U,t as v,k as V,p as P,l as Z,_ as z}from"./app-DZ82tjnP.js";const N=o=>(P("data-v-ca9e184e"),o=o(),Z(),o),J={class:"filter"},Y=N(()=>S("br",null,null,-1)),q={key:1,class:"mensagem"},G=N(()=>S("h1",null,"Nenhum dado encontrado!",-1)),K=[G],Q={key:2,class:"mensagem"},R=N(()=>S("h1",null,"Selecione um prestador!",-1)),W=[R],X=$({__name:"AcompanhamentoComponent",props:{data:Object},setup(o){const b=o,d=L({dataInicial:b.data.dateFilter.dataInicial,dataFinal:b.data.dateFilter.dataFinal}),y=A(b.data.selected);function O(){U.visit("/gestao/acompanhamento",{method:"post",data:{id:y.value,dataInicial:d.dataInicial,dataFinal:d.dataFinal}})}function j(f){return{title:f.name,subtitle:f.role}}function B(f){const[s,F,a]=f.split("-"),p=new Date(s,F-1,a);return`${p.getDate().toString().padStart(2,"0")}/${(p.getMonth()+1).toString().padStart(2,"0")}/${p.getFullYear()}`}function E(f,s){const F=new Date("1970-01-01T"+f+"Z"),a=new Date("1970-01-01T"+s+"Z"),u=Math.abs(a-F)/(1e3*60*60),r=Math.floor(u),h=Math.floor((u-r)*60),k=Math.round(((u-r)*60-h)*60),x=(r<10?"0":"")+r,D=(h<10?"0":"")+h,w=(k<10?"0":"")+k;return x+":"+D+":"+w}function H(){d.dataInicial="",d.dataFinal=""}return(f,s)=>{const F=c("v-select"),a=c("v-col"),p=c("v-text-field"),u=c("v-btn"),r=c("v-row"),h=c("v-expansion-panel-title"),k=c("v-expansion-panel"),x=c("v-icon"),D=c("v-expansion-panel-text"),w=c("v-expansion-panels");return n(),I(M,null,[S("section",J,[t(r,null,{default:e(()=>[t(a,{cols:"12",sm:"6",md:"3",class:"col-filter"},{default:e(()=>[t(F,{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=i=>y.value=i),label:"Prestador de serviço","item-props":j,items:o.data.prestadores,"item-text":"id","item-value":"id"},null,8,["modelValue","items"])]),_:1}),t(a,{cols:"12",sm:"6",md:"3",class:"col-filter"},{default:e(()=>[t(p,{modelValue:d.dataInicial,"onUpdate:modelValue":s[1]||(s[1]=i=>d.dataInicial=i),label:"Data Inicial",type:"date"},null,8,["modelValue"])]),_:1}),t(a,{cols:"12",sm:"6",md:"3",class:"col-filter"},{default:e(()=>[t(p,{modelValue:d.dataFinal,"onUpdate:modelValue":s[2]||(s[2]=i=>d.dataFinal=i),label:"Data Final",type:"date"},null,8,["modelValue"])]),_:1}),t(a,{cols:"12",sm:"12",md:"3",class:"d-flex align-center justify-end mb-4"},{default:e(()=>[t(u,{onClick:s[3]||(s[3]=i=>O()),class:"btn-search",disabled:y.value==null},{default:e(()=>[l(" Buscar ")]),_:1},8,["disabled"]),t(u,{onClick:s[4]||(s[4]=i=>H()),class:"ml-2"},{default:e(()=>[l("Limpar Filtro")]),_:1})]),_:1})]),_:1})]),JSON.stringify(o.data.records.hour)!=="[]"?(n(),_(w,{key:0,variant:"accordion"},{default:e(()=>[t(k,{elevation:"0",style:{"background-color":"blueviolet",color:"white"}},{default:e(()=>[t(h,{"hide-actions":!0},{default:e(()=>[t(r,{"no-gutters":""},{default:e(()=>[t(a,{cols:"4",class:"d-flex justify-start"},{default:e(()=>[l(" Dia ")]),_:1}),t(a,{cols:"4",class:"text--secondary"},{default:e(()=>[l(" Tempo trabalhado ")]),_:1}),t(a,{cols:"4",class:"text--secondary"},{default:e(()=>[l(" Status ")]),_:1})]),_:1})]),_:1})]),_:1}),(n(!0),I(M,null,T(o.data.records.hour,(i,m)=>(n(),_(k,{elevation:"0",key:m},{default:e(()=>[t(h,null,{default:e(()=>[t(r,{"no-gutters":""},{default:e(()=>[t(a,{cols:"4",class:"d-flex justify-start"},{default:e(()=>[l(v(B(m.slice(0,10))),1)]),_:2},1024),t(a,{cols:"4",class:"text--secondary"},{default:e(()=>[l(v(o.data.records.totalHour[m]),1)]),_:2},1024),t(a,{cols:"4",class:"text--secondary"},{default:e(()=>[o.data.records.errors[m]?V("",!0):(n(),_(x,{key:0,icon:"mdi-check-all"})),o.data.records.errors[m]?(n(),_(x,{key:1,icon:"mdi-alert"})):V("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(D,null,{default:e(()=>[t(r,{"no-gutters":"",class:"p-2",style:{"background-color":"rgb(213, 213, 213)"}},{default:e(()=>[t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" # ")]),_:1}),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" Entrada ")]),_:1}),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" Saida ")]),_:1}),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" Tempo trabalhado ")]),_:1}),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" Intervalo ")]),_:1}),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(" Ações ")]),_:1})]),_:1}),(n(!0),I(M,null,T(o.data.records.hour[m],(g,C)=>(n(),_(r,{key:m,"no-gutters":""},{default:e(()=>[t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(v(C+1),1)]),_:2},1024),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(v(g.input),1)]),_:2},1024),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(v(g.output)+" ",1),g.output?V("",!0):(n(),_(x,{key:0,icon:"mdi-alert"}))]),_:2},1024),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(v(g.hour_complete)+" ",1),g.hour_complete?V("",!0):(n(),_(x,{key:0,icon:"mdi-alert"}))]),_:2},1024),t(a,{cols:"2",class:"text-left"},{default:e(()=>[l(v(C==0?" ":E(o.data.records.hour[m][C-1].output,g.input))+" ",1),Y]),_:2},1024),t(a,{cols:"2",class:"text-left"},{default:e(()=>[t(u,{"prepend-icon":"mdi-pencil",variant:"outlined",size:"x-small",color:"orange",class:"mb-1"},{default:e(()=>[l(" Ajuste ")]),_:1})]),_:1})]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})):o.data.selected?(n(),I("div",q,K)):(n(),I("div",Q,W))],64)}}}),tt=z(X,[["__scopeId","data-v-ca9e184e"]]),at=$({__name:"Index",props:{records:Object,prestadores:Object,selected:Number,dateFilter:{type:Object,default:{dataInicial:"",dataFinal:""}}},setup(o){const b=A(" | Acompanhamento de Horas"),d=o;return(y,O)=>{const j=c("painel-gestao");return n(),_(j,{backTo:"true","page-name":b.value},{default:e(()=>[t(tt,{data:d},null,8,["data"])]),_:1},8,["page-name"])}}});export{at as default};
